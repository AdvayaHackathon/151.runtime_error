{% extends "base.html" %}

{% block title %}AI Mental Health Report{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-dark text-white">
                <h2 class="h5 mb-0">AI-Generated Mental Health Report</h2>
            </div>
            
            <div class="card-body p-4">
                <div class="mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <h3 class="h4 me-auto mb-0">Assessment Overview</h3>
                        <span class="badge bg-primary">Powered by Google Gemini AI</span>
                    </div>
                    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-primary text-white">
                                    PHQ-8 Score
                                </div>
                                <div class="card-body text-center">
                                    <h5 class="card-title">Depression Screening</h5>
                                    <div class="display-4 mb-2">{{ phq8_score }}</div>
                                    <p class="card-text">
                                        {% if phq8_score <= 4 %}
                                            <span class="badge bg-success">None/minimal</span>
                                        {% elif phq8_score <= 9 %}
                                            <span class="badge bg-info">Mild</span>
                                        {% elif phq8_score <= 14 %}
                                            <span class="badge bg-warning">Moderate</span>
                                        {% elif phq8_score <= 19 %}
                                            <span class="badge bg-danger">Moderately severe</span>
                                        {% else %}
                                            <span class="badge bg-danger">Severe</span>
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header bg-info text-white">
                                    Depression Risk
                                </div>
                                <div class="card-body text-center">
                                    <h5 class="card-title">AI Prediction</h5>
                                    <div class="display-4 mb-2">
                                        {% if is_depressed %}
                                            <span class="text-danger">High</span>
                                        {% else %}
                                            <span class="text-success">Low</span>
                                        {% endif %}
                                    </div>
                                    <p class="card-text">
                                        <span class="badge {% if is_depressed %}bg-danger{% else %}bg-success{% endif %}">
                                            {{ "%.1f"|format(depression_confidence * 100) }}% confidence
                                        </span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h4 class="h5 mb-3">AI Generated Report</h4>
                    <div class="card">
                        <div class="card-body ai-report-content">
                            {{ report_content|safe }}
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-warning mb-4">
                    <h4 class="h6">Important Disclaimer</h4>
                    <p class="mb-0">This AI-generated report is not a diagnostic tool and should not replace professional evaluation. The insights provided are based on the assessment data and are intended to offer perspectives that may warrant further attention from qualified mental health professionals.</p>
                </div>
                
                <div class="d-grid gap-2 col-md-8 mx-auto">
                    <a href="{{ url_for('main.final_result') }}" class="btn btn-secondary">Back to Assessment Results</a>
                    <a href="{{ url_for('main.index') }}" class="btn btn-primary">Start New Assessment</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<style>
    .ai-report-content {
        white-space: pre-line;
        font-size: 1rem;
        line-height: 1.6;
    }
    .ai-report-content h1, 
    .ai-report-content h2, 
    .ai-report-content h3, 
    .ai-report-content h4, 
    .ai-report-content h5 {
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        font-weight: 600;
    }
</style>
{% endblock %} 